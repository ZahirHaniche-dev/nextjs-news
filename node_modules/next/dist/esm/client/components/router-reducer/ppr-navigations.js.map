{"version":3,"sources":["../../../../src/client/components/router-reducer/ppr-navigations.ts"],"names":["DEFAULT_SEGMENT_KEY","PAGE_SEGMENT_KEY","matchSegment","createRouterCacheKey","updateCacheNodeOnNavigation","oldCacheNode","oldRouterState","newRouterState","prefetchData","prefetchHead","isPrefetchStale","oldRouterStateChildren","newRouterStateChildren","prefetchDataChildren","oldParallelRoutes","parallelRoutes","prefetchParallelRoutes","Map","patchedRouterStateChildren","taskChildren","parallelRouteKey","newRouterStateChild","oldRouterStateChild","oldSegmentMapChild","get","prefetchDataChild","newSegmentChild","newSegmentKeyChild","oldSegmentChild","undefined","oldCacheNodeChild","taskChild","spawnPendingTask","spawnReusedTask","spawnTaskForMissingData","set","newCacheNodeChild","node","newSegmentMapChild","route","newCacheNode","lazyData","rsc","prefetchRsc","head","patchRouterStateWithNewChildren","children","baseRouterState","newChildren","clone","routerState","pendingCacheNode","createPendingCacheNode","reusedRouterState","listenForDynamicRequest","task","responsePromise","then","response","flightData","flightDataPath","segmentPath","slice","serverRouterState","length","dynamicData","dynamicHead","writeDynamicDataIntoPendingTask","abortTask","error","rootTask","i","segment","taskSegment","finishTaskUsingDynamicDataPayload","taskNode","finishPendingCacheNode","serverChildren","dynamicDataChildren","serverRouterStateChild","dynamicDataChild","routerStateChildren","routerStateChild","segmentChild","segmentKeyChild","isLeafSegment","size","maybePrefetchRsc","createDeferredRsc","cacheNode","taskState","serverState","taskStateChildren","serverStateChildren","dataChildren","taskStateChild","serverStateChild","dataChild","segmentMapChild","taskSegmentChild","taskSegmentKeyChild","cacheNodeChild","abortPendingCacheNode","dynamicSegmentData","isDeferredRsc","resolve","values","reject","updateCacheNodeOnPopstateRestoration","newParallelRoutes","shouldUsePrefetch","status","DEFERRED","Symbol","value","tag","pendingRsc","Promise","res","rej","fulfilledRsc","rejectedRsc","reason"],"mappings":"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"}